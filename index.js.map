{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nconst loaderStyles = document.createElement(\"style\");\nloaderStyles.textContent = `\n .loader {\n  color: #FFF;\n  display: inline-block;\n  position: relative;\n  font-size: 48px;\n  font-family: Arial, Helvetica, sans-serif;\n  box-sizing: border-box;\n}\n.loader::after {\n  content: '';  \n  width: 5px;\n  height: 5px;\n  background: currentColor;\n  position: absolute;\n  bottom: 10px;\n  right: -5px;\n  box-sizing: border-box;\n  animation: animloader 1s linear infinite;\n}\n.hidden {\ndisplay: none;\n}\n\n@keyframes animloader {\n  0% {\n    box-shadow: 10px 0 rgba(255, 255, 255, 0), 20px 0 rgba(255, 255, 255, 0);\n  }\n  50% {\n    box-shadow: 10px 0 white, 20px 0 rgba(255, 255, 255, 0);\n  }\n  100% {\n    box-shadow: 10px 0 white, 20px 0 white;\n  }\n}\n`;\ndocument.head.appendChild(loaderStyles);\n\nexport function createGallery(images) { \n  return images.map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" \n/>\n      </a>\n      <div class=\"item-description-wrap\">\n        <div class=\"description-item\" style=\"\">\n          <h3 class=\"item-title\">Likes</h3>\n          <p class=\"item-text\">${likes}</p>\n        </div>\n        <div class=\"description-item\">\n          <h3 class=\"item-title\">Views</h3>\n          <p class=\"item-text\">${views}</p>\n        </div>\n        <div class=\"description-item\">\n          <h3 class=\"item-title\">Comments</h3>\n          <p class=\"item-text\">${comments}</p>\n        </div>\n        <div class=\"description-item\">\n          <h3 class=\"item-title\">Downloads</h3>\n          <p class=\"item-text\">${downloads}</p>\n        </div>\n      </div>\n    </li>\n  `).join(\"\");\n}\n\nexport function showLoader() { \n  loader.classList.remove(\"hidden\");\n  loader.style.position = \"fixed\";\n  loader.style.top = \"50%\";\n  loader.style.left = \"50%\";\n  loader.style.transform = \"translate(-50%, -50%)\";\n  loader.style.zIndex = \"9999\";\n  loader.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n  loader.style.padding = \"20px\";\n  loader.style.borderRadius = \"50%\";\n}\n\nexport function hideLoader() { \n  loader.classList.add(\"hidden\");\n}\n\nlet lightbox = null;\n\nexport function renderGallery(images) { \n  const markup = createGallery(images);\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n    if (lightbox) {\n    lightbox.refresh()\n    } else { \n      lightbox = new SimpleLightbox(\".gallery a\", {\n        captionData: \"alt\",\n        captionDelay: 250,\n      });\n    }\n}\n\nexport function updateLightBox() { \n  if (lightbox) {\n    lightbox.refresh()\n  } else { \n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionData: \"alt\",\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function clearGallery() { \n  gallery.innerHTML = \"\";\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove(\"hidden\");\n}\n \nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add(\"hidden\");\n }\n\n\n","import axios from \"axios\";\nimport { showLoader, hideLoader } from \"./render-functions\";\n\nconst API_KEY = \"51435495-8626d86cd8f20f3f9ed789055\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1, perPage) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: perPage,\n    page\n  };\n  try {\n    showLoader();   \n    const { data } = await axios(BASE_URL, { params });\n    hideLoader();\n    return data; \n  } catch(error) { \n    iziToast.error({\n          title: \"\",\n          message: \"Помилка виконання запиту. Спробуйте ще раз.\",\n          position: \"topRight\",\n          timeout: 4000,\n          close: false,\n          maxWidth: 300,\n          messageColor: \"#fff\",\n          color: \"#e23232\"\n        });\n  };\n};","\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n  clearGallery,\n  renderGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".form input\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMoreButton.addEventListener(\"click\", onClickHandle); \n\nlet page = 1;\nlet currentQuery = \"\";\nconst perPage = 15;\nlet totalPages;\n\nfunction handleSubmit(event) { \n\n  event.preventDefault();\n  hideLoadMoreButton();\n\n  page = 1;\n\n  currentQuery = input.value.trim();\n  if (!currentQuery) {\n    iziToast.warning({\n    title: '',\n    message: 'Порожній запит!',\n    position: 'topRight',\n    timeout: 3000,\n  });\n    return;\n  }\n\n  clearGallery();\n\n  getImagesByQuery(currentQuery, page, perPage)\n    .then(data => { \n      if (!data.hits || data.hits.length === 0) {\n        iziToast.error({\n          title: \"\",\n          message: \"Зображення не знайдені. Спробуйте інший запит.\",\n          position: \"topRight\",\n          timeout: 4000,\n          close: false,\n          maxWidth: 300,\n          messageColor: \"#fff\",\n          color: \"#e23232\"\n        });\n        return;\n      };\n\n      renderGallery(data.hits);\n      \n      totalPages = Math.ceil(data.totalHits / perPage);\n      \n      if (page < totalPages) { \n        showLoadMoreButton();\n      };\n    })\n    .catch(error => {\n      iziToast.error({\n        title: \"\",\n        message: \"Помилка запиту. Спробуйте пізніше.\",\n        position: \"topRight\",\n        timeout: 4000,\n      });\n      hideLoadMoreButton();\n    })\n    .finally(() => {\n      input.value = \"\";\n      \n    });\n}\n\nasync function onClickHandle() { \n  page++;\n  try {\n    loadMoreButton.disabled = true;\n    const data = await getImagesByQuery(currentQuery, page, perPage);\n    renderGallery(data.hits);\n    \n    const { height: cardHeight } = document\n      .querySelector(\".gallery\")\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n\n    loadMoreButton.disabled = false;\n    if (!totalPages || page >= totalPages) { \n      hideLoadMoreButton();\n      iziToast.warning({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n        timeout: 3000,\n      });\n\n    }\n  } catch (error) { \n    iziToast.error({\n      title: '',\n      message: error.message || \"Помилка при завантаженні зображень.\",\n      position: 'topRight',\n      timeout: 4000,\n      });\n  };\n};\n\n\n\n\n\n\n"],"names":["gallery","loader","loadMoreButton","loaderStyles","createGallery","images","webformatURL","tags","likes","views","comments","downloads","largeImageURL","showLoader","hideLoader","lightbox","renderGallery","markup","SimpleLightbox","clearGallery","showLoadMoreButton","hideLoadMoreButton","API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","params","data","axios","form","input","handleSubmit","onClickHandle","currentQuery","totalPages","event","iziToast","error","cardHeight"],"mappings":"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"}